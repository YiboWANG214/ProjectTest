<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>bankManagement.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">o1bankingApplication</a> &gt; <a href="index.source.html" class="el_package">projecteval.bankingApplication</a> &gt; <span class="el_source">bankManagement.java</span></div><h1>bankManagement.java</h1><pre class="source lang-java linenums">package projecteval.bankingApplication;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.SQLIntegrityConstraintViolationException;
import java.sql.Statement;

<span class="nc" id="L12">public class bankManagement { // these class provides all</span>
							// bank method

	private static final int NULL = 0;

<span class="fc" id="L17">	static Connection con = connection.getConnection();</span>
<span class="fc" id="L18">	static String sql = &quot;&quot;;</span>
	public static boolean
	createAccount(String name,
				int passCode) // create account function
	{
		try {
			// validation
<span class="pc bpc" id="L25" title="2 of 4 branches missed.">			if (name == &quot;&quot; || passCode == NULL) {</span>
<span class="nc" id="L26">				System.out.println(&quot;All Field Required!&quot;);</span>
<span class="nc" id="L27">				return false;</span>
			}
			// query
<span class="nc" id="L30">			Statement st = con.createStatement();</span>
<span class="nc" id="L31">			sql = &quot;INSERT INTO customer(cname,balance,pass_code) values('&quot;</span>
				+ name + &quot;',1000,&quot; + passCode + &quot;)&quot;;

			// Execution
<span class="nc bnc" id="L35" title="All 2 branches missed.">			if (st.executeUpdate(sql) == 1) {</span>
<span class="nc" id="L36">				System.out.println(name</span>
								+ &quot;, Now You Login!&quot;);
<span class="nc" id="L38">				return true;</span>
			}
			// return
		}
<span class="nc" id="L42">		catch (SQLIntegrityConstraintViolationException e) {</span>
<span class="nc" id="L43">			System.out.println(&quot;Username Not Available!&quot;);</span>
		}
<span class="fc" id="L45">		catch (Exception e) {</span>
<span class="fc" id="L46">			e.printStackTrace();</span>
<span class="nc" id="L47">		}</span>
<span class="fc" id="L48">		return false;</span>
	}
	public static boolean
	loginAccount(String name, int passCode) // login method
	{
		try {
			// validation
<span class="pc bpc" id="L55" title="2 of 4 branches missed.">			if (name == &quot;&quot; || passCode == NULL) {</span>
<span class="nc" id="L56">				System.out.println(&quot;All Field Required!&quot;);</span>
<span class="nc" id="L57">				return false;</span>
			}
			// query
<span class="fc" id="L60">			sql = &quot;select * from customer where cname='&quot;</span>
				+ name + &quot;' and pass_code=&quot; + passCode;
<span class="fc" id="L62">			PreparedStatement st</span>
<span class="nc" id="L63">				= con.prepareStatement(sql);</span>
<span class="nc" id="L64">			ResultSet rs = st.executeQuery();</span>
			// Execution
<span class="nc" id="L66">			BufferedReader sc = new BufferedReader(</span>
				new InputStreamReader(System.in));

<span class="nc bnc" id="L69" title="All 2 branches missed.">			if (rs.next()) {</span>
				// after login menu driven interface method

<span class="nc" id="L72">				int ch = 5;</span>
<span class="nc" id="L73">				int amt = 0;</span>
<span class="nc" id="L74">				int senderAc = rs.getInt(&quot;ac_no&quot;);</span>
				;
				int receiveAc;
				while (true) {
					try {
<span class="nc" id="L79">						System.out.println(</span>
							&quot;Hallo, &quot;
<span class="nc" id="L81">							+ rs.getString(&quot;cname&quot;));</span>
<span class="nc" id="L82">						System.out.println(</span>
							&quot;1)Transfer Money&quot;);
<span class="nc" id="L84">						System.out.println(&quot;2)View Balance&quot;);</span>
<span class="nc" id="L85">						System.out.println(&quot;5)LogOut&quot;);</span>

<span class="nc" id="L87">						System.out.print(&quot;Enter Choice:&quot;);</span>
<span class="nc" id="L88">						ch = Integer.parseInt(</span>
<span class="nc" id="L89">							sc.readLine());</span>
<span class="nc bnc" id="L90" title="All 2 branches missed.">						if (ch == 1) {</span>
<span class="nc" id="L91">							System.out.print(</span>
								&quot;Enter Receiver A/c No:&quot;);
<span class="nc" id="L93">							receiveAc = Integer.parseInt(</span>
<span class="nc" id="L94">								sc.readLine());</span>
<span class="nc" id="L95">							System.out.print(</span>
								&quot;Enter Amount:&quot;);
<span class="nc" id="L97">							amt = Integer.parseInt(</span>
<span class="nc" id="L98">								sc.readLine());</span>

<span class="nc" id="L100">							if (bankManagement</span>
<span class="nc bnc" id="L101" title="All 2 branches missed.">									.transferMoney(</span>
										senderAc, receiveAc,
										amt)) {
<span class="nc" id="L104">								System.out.println(</span>
									&quot;MSG : Money Sent Successfully!\n&quot;);
							}
							else {
<span class="nc" id="L108">								System.out.println(</span>
									&quot;ERR : Failed!\n&quot;);
							}
						}
<span class="nc bnc" id="L112" title="All 2 branches missed.">						else if (ch == 2) {</span>

<span class="nc" id="L114">							bankManagement.getBalance(</span>
								senderAc);
						}
<span class="nc bnc" id="L117" title="All 2 branches missed.">						else if (ch == 5) {</span>
<span class="nc" id="L118">							break;</span>
						}
						else {
<span class="nc" id="L121">							System.out.println(</span>
								&quot;Err : Enter Valid input!\n&quot;);
						}
					}
<span class="nc" id="L125">					catch (Exception e) {</span>
<span class="nc" id="L126">						e.printStackTrace();</span>
<span class="nc" id="L127">					}</span>
				}
<span class="nc" id="L129">			}</span>
			else {
<span class="nc" id="L131">				return false;</span>
			}
			// return
<span class="nc" id="L134">			return true;</span>
		}
<span class="nc" id="L136">		catch (SQLIntegrityConstraintViolationException e) {</span>
<span class="nc" id="L137">			System.out.println(&quot;Username Not Available!&quot;);</span>
		}
<span class="fc" id="L139">		catch (Exception e) {</span>
<span class="fc" id="L140">			e.printStackTrace();</span>
<span class="nc" id="L141">		}</span>
<span class="fc" id="L142">		return false;</span>
	}
	public static void
	getBalance(int acNo) // fetch balance method
	{
		try {

			// query
<span class="nc" id="L150">			sql = &quot;select * from customer where ac_no=&quot;</span>
				+ acNo;
<span class="nc" id="L152">			PreparedStatement st</span>
<span class="nc" id="L153">				= con.prepareStatement(sql);</span>

<span class="nc" id="L155">			ResultSet rs = st.executeQuery(sql);</span>
<span class="nc" id="L156">			System.out.println(</span>
				&quot;-----------------------------------------------------------&quot;);
<span class="nc" id="L158">			System.out.printf(&quot;%12s %10s %10s\n&quot;,</span>
							&quot;Account No&quot;, &quot;Name&quot;,
							&quot;Balance&quot;);

			// Execution

<span class="nc bnc" id="L164" title="All 2 branches missed.">			while (rs.next()) {</span>
<span class="nc" id="L165">				System.out.printf(&quot;%12d %10s %10d.00\n&quot;,</span>
<span class="nc" id="L166">								rs.getInt(&quot;ac_no&quot;),</span>
<span class="nc" id="L167">								rs.getString(&quot;cname&quot;),</span>
<span class="nc" id="L168">								rs.getInt(&quot;balance&quot;));</span>
			}
<span class="nc" id="L170">			System.out.println(</span>
				&quot;-----------------------------------------------------------\n&quot;);
		}
<span class="nc" id="L173">		catch (Exception e) {</span>
<span class="nc" id="L174">			e.printStackTrace();</span>
<span class="nc" id="L175">		}</span>
<span class="nc" id="L176">	}</span>
	public static boolean transferMoney(int sender_ac,
										int reveiver_ac,
										int amount)
		throws SQLException // transfer money method
	{
		// validation
<span class="nc bnc" id="L183" title="All 4 branches missed.">		if (reveiver_ac == NULL || amount == NULL) {</span>
<span class="nc" id="L184">			System.out.println(&quot;All Field Required!&quot;);</span>
<span class="nc" id="L185">			return false;</span>
		}
		try {
<span class="nc" id="L188">			con.setAutoCommit(false);</span>
<span class="nc" id="L189">			sql = &quot;select * from customer where ac_no=&quot;</span>
				+ sender_ac;
<span class="nc" id="L191">			PreparedStatement ps</span>
<span class="nc" id="L192">				= con.prepareStatement(sql);</span>
<span class="nc" id="L193">			ResultSet rs = ps.executeQuery();</span>

<span class="nc bnc" id="L195" title="All 2 branches missed.">			if (rs.next()) {</span>
<span class="nc bnc" id="L196" title="All 2 branches missed.">				if (rs.getInt(&quot;balance&quot;) &lt; amount) {</span>
<span class="nc" id="L197">					System.out.println(</span>
						&quot;Insufficient Balance!&quot;);
<span class="nc" id="L199">					return false;</span>
				}
			}

<span class="nc" id="L203">			Statement st = con.createStatement();</span>

			// debit
<span class="nc" id="L206">			con.setSavepoint();</span>

<span class="nc" id="L208">			sql = &quot;update customer set balance=balance-&quot;</span>
				+ amount + &quot; where ac_no=&quot; + sender_ac;
<span class="nc bnc" id="L210" title="All 2 branches missed.">			if (st.executeUpdate(sql) == 1) {</span>
<span class="nc" id="L211">				System.out.println(&quot;Amount Debited!&quot;);</span>
			}

			// credit
<span class="nc" id="L215">			sql = &quot;update customer set balance=balance+&quot;</span>
				+ amount + &quot; where ac_no=&quot; + reveiver_ac;
<span class="nc" id="L217">			st.executeUpdate(sql);</span>

<span class="nc" id="L219">			con.commit();</span>
<span class="nc" id="L220">			return true;</span>
		}
<span class="nc" id="L222">		catch (Exception e) {</span>
<span class="nc" id="L223">			e.printStackTrace();</span>
<span class="nc" id="L224">			con.rollback();</span>
		}
		// return
<span class="nc" id="L227">		return false;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>