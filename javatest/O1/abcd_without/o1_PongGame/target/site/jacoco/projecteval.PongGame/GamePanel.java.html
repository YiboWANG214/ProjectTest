<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GamePanel.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">o1PongGame</a> &gt; <a href="index.source.html" class="el_package">projecteval.PongGame</a> &gt; <span class="el_source">GamePanel.java</span></div><h1>GamePanel.java</h1><pre class="source lang-java linenums">package projecteval.PongGame;

import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class GamePanel extends JPanel implements Runnable{

	static final int GAME_WIDTH = 1000;
	static final int GAME_HEIGHT = (int)(GAME_WIDTH * (0.5555));
<span class="fc" id="L12">	static final Dimension SCREEN_SIZE = new Dimension(GAME_WIDTH,GAME_HEIGHT);</span>
	static final int BALL_DIAMETER = 20;
	static final int PADDLE_WIDTH = 25;
	static final int PADDLE_HEIGHT = 100;
	Thread gameThread;
	Image image;
	Graphics graphics;
	Random random;
	Paddle paddle1;
	Paddle paddle2;
	Ball ball;
	Score score;
	
<span class="fc" id="L25">	GamePanel(){</span>
<span class="fc" id="L26">		newPaddles();</span>
<span class="fc" id="L27">		newBall();</span>
<span class="fc" id="L28">		score = new Score(GAME_WIDTH,GAME_HEIGHT);</span>
<span class="fc" id="L29">		this.setFocusable(true);</span>
<span class="fc" id="L30">		this.addKeyListener(new AL());</span>
<span class="fc" id="L31">		this.setPreferredSize(SCREEN_SIZE);</span>
		
<span class="fc" id="L33">		gameThread = new Thread(this);</span>
<span class="fc" id="L34">		gameThread.start();</span>
<span class="fc" id="L35">	}</span>
	
	public void newBall() {
<span class="fc" id="L38">		random = new Random();</span>
<span class="fc" id="L39">		ball = new Ball((GAME_WIDTH/2)-(BALL_DIAMETER/2),random.nextInt(GAME_HEIGHT-BALL_DIAMETER),BALL_DIAMETER,BALL_DIAMETER);</span>
<span class="fc" id="L40">	}</span>
	public void newPaddles() {
<span class="fc" id="L42">		paddle1 = new Paddle(0,(GAME_HEIGHT/2)-(PADDLE_HEIGHT/2),PADDLE_WIDTH,PADDLE_HEIGHT,1);</span>
<span class="fc" id="L43">		paddle2 = new Paddle(GAME_WIDTH-PADDLE_WIDTH,(GAME_HEIGHT/2)-(PADDLE_HEIGHT/2),PADDLE_WIDTH,PADDLE_HEIGHT,2);</span>
<span class="fc" id="L44">	}</span>
	public void paint(Graphics g) {
<span class="fc" id="L46">		image = createImage(getWidth(),getHeight());</span>
<span class="fc" id="L47">		graphics = image.getGraphics();</span>
<span class="fc" id="L48">		draw(graphics);</span>
<span class="fc" id="L49">		g.drawImage(image,0,0,this);</span>
<span class="fc" id="L50">	}</span>
	public void draw(Graphics g) {
<span class="fc" id="L52">		paddle1.draw(g);</span>
<span class="fc" id="L53">		paddle2.draw(g);</span>
<span class="fc" id="L54">		ball.draw(g);</span>
<span class="fc" id="L55">		score.draw(g);</span>
<span class="fc" id="L56">Toolkit.getDefaultToolkit().sync(); // I forgot to add this line of code in the video, it helps with the animation</span>

<span class="fc" id="L58">	}</span>
	public void move() {
<span class="fc" id="L60">		paddle1.move();</span>
<span class="fc" id="L61">		paddle2.move();</span>
<span class="fc" id="L62">		ball.move();</span>
<span class="fc" id="L63">	}</span>
	public void checkCollision() {
		
		//bounce ball off top &amp; bottom window edges
<span class="fc bfc" id="L67" title="All 2 branches covered.">		if(ball.y &lt;=0) {</span>
<span class="fc" id="L68">			ball.setYDirection(-ball.yVelocity);</span>
		}
<span class="fc bfc" id="L70" title="All 2 branches covered.">		if(ball.y &gt;= GAME_HEIGHT-BALL_DIAMETER) {</span>
<span class="fc" id="L71">			ball.setYDirection(-ball.yVelocity);</span>
		}
		//bounce ball off paddles
<span class="pc bpc" id="L74" title="1 of 2 branches missed.">		if(ball.intersects(paddle1)) {</span>
<span class="nc" id="L75">			ball.xVelocity = Math.abs(ball.xVelocity);</span>
<span class="nc" id="L76">			ball.xVelocity++; //optional for more difficulty</span>
<span class="nc bnc" id="L77" title="All 2 branches missed.">			if(ball.yVelocity&gt;0)</span>
<span class="nc" id="L78">				ball.yVelocity++; //optional for more difficulty</span>
			else
<span class="nc" id="L80">				ball.yVelocity--;</span>
<span class="nc" id="L81">			ball.setXDirection(ball.xVelocity);</span>
<span class="nc" id="L82">			ball.setYDirection(ball.yVelocity);</span>
		}
<span class="pc bpc" id="L84" title="1 of 2 branches missed.">		if(ball.intersects(paddle2)) {</span>
<span class="nc" id="L85">			ball.xVelocity = Math.abs(ball.xVelocity);</span>
<span class="nc" id="L86">			ball.xVelocity++; //optional for more difficulty</span>
<span class="nc bnc" id="L87" title="All 2 branches missed.">			if(ball.yVelocity&gt;0)</span>
<span class="nc" id="L88">				ball.yVelocity++; //optional for more difficulty</span>
			else
<span class="nc" id="L90">				ball.yVelocity--;</span>
<span class="nc" id="L91">			ball.setXDirection(-ball.xVelocity);</span>
<span class="nc" id="L92">			ball.setYDirection(ball.yVelocity);</span>
		}
		//stops paddles at window edges
<span class="pc bpc" id="L95" title="1 of 2 branches missed.">		if(paddle1.y&lt;=0)</span>
<span class="nc" id="L96">			paddle1.y=0;</span>
<span class="pc bpc" id="L97" title="1 of 2 branches missed.">		if(paddle1.y &gt;= (GAME_HEIGHT-PADDLE_HEIGHT))</span>
<span class="nc" id="L98">			paddle1.y = GAME_HEIGHT-PADDLE_HEIGHT;</span>
<span class="pc bpc" id="L99" title="1 of 2 branches missed.">		if(paddle2.y&lt;=0)</span>
<span class="nc" id="L100">			paddle2.y=0;</span>
<span class="pc bpc" id="L101" title="1 of 2 branches missed.">		if(paddle2.y &gt;= (GAME_HEIGHT-PADDLE_HEIGHT))</span>
<span class="nc" id="L102">			paddle2.y = GAME_HEIGHT-PADDLE_HEIGHT;</span>
		//give a player 1 point and creates new paddles &amp; ball
<span class="fc bfc" id="L104" title="All 2 branches covered.">		if(ball.x &lt;=0) {</span>
<span class="fc" id="L105">			score.player2++;</span>
<span class="fc" id="L106">			newPaddles();</span>
<span class="fc" id="L107">			newBall();</span>
<span class="fc" id="L108">			System.out.println(&quot;Player 2: &quot;+score.player2);</span>
		}
<span class="fc bfc" id="L110" title="All 2 branches covered.">		if(ball.x &gt;= GAME_WIDTH-BALL_DIAMETER) {</span>
<span class="fc" id="L111">			score.player1++;</span>
<span class="fc" id="L112">			newPaddles();</span>
<span class="fc" id="L113">			newBall();</span>
<span class="fc" id="L114">			System.out.println(&quot;Player 1: &quot;+score.player1);</span>
		}
<span class="fc" id="L116">	}</span>
	public void run() {
		//game loop
<span class="fc" id="L119">		long lastTime = System.nanoTime();</span>
<span class="fc" id="L120">		double amountOfTicks =60.0;</span>
<span class="fc" id="L121">		double ns = 1000000000 / amountOfTicks;</span>
<span class="fc" id="L122">		double delta = 0;</span>
		while(true) {
<span class="fc" id="L124">			long now = System.nanoTime();</span>
<span class="fc" id="L125">			delta += (now -lastTime)/ns;</span>
<span class="fc" id="L126">			lastTime = now;</span>
<span class="fc bfc" id="L127" title="All 2 branches covered.">			if(delta &gt;=1) {</span>
<span class="fc" id="L128">				move();</span>
<span class="fc" id="L129">				checkCollision();</span>
<span class="fc" id="L130">				repaint();</span>
<span class="fc" id="L131">				delta--;</span>
			}
<span class="fc" id="L133">		}</span>
	}
<span class="fc" id="L135">	public class AL extends KeyAdapter{</span>
		public void keyPressed(KeyEvent e) {
<span class="fc" id="L137">			paddle1.keyPressed(e);</span>
<span class="fc" id="L138">			paddle2.keyPressed(e);</span>
<span class="fc" id="L139">		}</span>
		public void keyReleased(KeyEvent e) {
<span class="fc" id="L141">			paddle1.keyReleased(e);</span>
<span class="fc" id="L142">			paddle2.keyReleased(e);</span>
<span class="fc" id="L143">		}</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>